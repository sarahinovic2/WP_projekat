<h2>Sleep Tracker</h2>
<p>Zabilježi koliko si spavala/spavao.</p>

<form (ngSubmit)="addEntry()" #sleepForm="ngForm" class="sleep-form">
  <label>
    Datum:
    <input type="date" [(ngModel)]="date" name="date" required />
  </label>

  <label>
    Broj sati sna:
    <input type="number" [(ngModel)]="hours" name="hours" min="0" step="0.5" required />
  </label>

  <label>
    Ocjena (1–5):
    <select [(ngModel)]="rating" name="rating">
      <option [ngValue]="1">1</option>
      <option [ngValue]="2">2</option>
      <option [ngValue]="3">3</option>
      <option [ngValue]="4">4</option>
      <option [ngValue]="5">5</option>
    </select>
  </label>

  <label>
    Bilješka:
    <textarea [(ngModel)]="note" name="note" rows="2" placeholder="Opcionalno: snovi, kako si se osjećao/la..."></textarea>
  </label>

  <button type="submit">Dodaj zapis</button>
</form>

<hr />

<h3>Historija spavanja</h3>
<table class="sleep-table" *ngIf="entries.length; else noEntries">
  <thead>
    <tr>
      <th>Datum</th>
      <th>Sati</th>
      <th>Ocjena</th>
      <th>Interpretacija</th>
      <th>Bilješka</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let e of entries">
      <td>{{ e.date }}</td>
      <td>{{ e.hours }}</td>
      <td>{{ e.rating }}</td>
      <td>{{ getMoodLabel(e.rating) }}</td>
      <td>{{ e.note }}</td>
      <td><button type="button" (click)="deleteEntry(e.id)">X</button></td>
    </tr>
  </tbody>
</table>

<ng-template #noEntries>
  <p>Još nema zapisa. Dodaj prvi zapis o spavanju.</p>
</ng-template>
