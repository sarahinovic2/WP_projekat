<div class="page">
  <header class="page-header">
    <h1 class="page-title">Water Tracker</h1>
    <p class="page-subtitle">
      Cilj je popiti barem 2L vode (10 캜a코a po 0.2L) dnevno. Stay hydrated!
    </p>
  </header>

  <!-- Odabrani dan i statistika -->
  <section class="card water-card">
    <div class="water-summary">
      <label class="field">
        <span class="field-label">Datum</span>
        <input
          class="field-input"
          type="date"
          [(ngModel)]="selectedDate" />
      </label>

      <div class="stats">
        <p>캛a코e: {{ glassesForSelectedDate }} / {{ maxGlassesPerDay }}</p>
        <p>Litara: {{ litersForSelectedDate }} L (cilj 2L)</p>
        <p>
          Status:
          <span *ngIf="glassesForSelectedDate >= glassesPerDayTarget; else notReached">
            Uspje코an dan 游꿀
          </span>
          <ng-template #notReached>
            Jo코 nisi dosegao/la 2L.
          </ng-template>
        </p>
      </div>
    </div>

    <!-- 20 캜a코a -->
    <div class="glasses-row">
      <div
        *ngFor="let g of [].constructor(maxGlassesPerDay); index as i"
        class="glass"
        [class.filled]="isGlassFilled(i + 1)"
        (click)="setGlasses(i + 1)">
        {{ i + 1 }}
      </div>
    </div>
  </section>

  <!-- Kalendar -->
  <section class="card water-card">
    <h3 class="section-title">Kalendar</h3>

    <div class="calendar-controls">
      <button
        type="button"
        class="btn-secondary"
        (click)="changeMonth(-1)">
        &laquo;
      </button>
      <span class="month-label">{{ monthName }} {{ selectedYear }}</span>
      <button
        type="button"
        class="btn-secondary"
        (click)="changeMonth(1)">
        &raquo;
      </button>
    </div>

    <div class="calendar-grid">
      <div class="weekday">Pon</div>
      <div class="weekday">Uto</div>
      <div class="weekday">Sri</div>
      <div class="weekday">캛et</div>
      <div class="weekday">Pet</div>
      <div class="weekday">Sub</div>
      <div class="weekday">Ned</div>

      <ng-container *ngFor="let day of calendarDays">
        <div
          class="calendar-cell"
          *ngIf="day; else emptyCell"
          [class.success]="isSuccess(toDateString(day))"
          [class.selected]="toDateString(day) === selectedDate"
          (click)="selectDateFromCalendar(day)">
          {{ day.getDate() }}
        </div>
        <ng-template #emptyCell>
          <div class="calendar-cell empty"></div>
        </ng-template>
      </ng-container>
    </div>
  </section>
</div>
